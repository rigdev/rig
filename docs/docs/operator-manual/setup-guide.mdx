import {
RIG_PLATFORM_CHART_VERSION,
RIG_OPERATOR_CHART_VERSION
} from "../../src/constants/versions"

# Setup guide

## Kubernetes Cluster Installation

Rig shines when it gets to run in a real Kubernetes environment. It
lowers the barrier of entry for engineers as they won't have to learn the
complex APIs of Kubernetes.

Rig consists of two components which together gives the full experience of
Rig.dev.

- **rig-operator**: our open source components which provide higher level APIs in
  kubernetes, which encapsulate multiple low level resources in a single CRD.
- **rig-platform**: our paid product which further builds on the primitives
  provided by rig-operator.

Each of these components have their own requirements and offer options for
configuration to make it fit into your kubernetes cluster.

## Quick Installation

For a quick installation in an existing Kubernetes cluster, you can follow the
steps here. For a more in-depth guide, see the next section.

1. Install dependencies:
    1. Install Certificate Manager if missing: https://cert-manager.io/
    2. Install Metrics Server if missing: https://github.com/kubernetes-sigs/metrics-server
2. Install the Rig Operator:
  <pre><code className="language-bash">{`helm upgrade --install rig-operator rig-operator \\
    --repo https://charts.rig.dev \\
    --version ${RIG_OPERATOR_CHART_VERSION} \\
    --namespace rig-system \\
    --create-namespace`}</code></pre>
3. Install the Rig Platform:
  <pre><code className="language-bash">{`helm upgrade --install rig-platform rig-platform \\
    --repo https://charts.rig.dev \\
    --version ${RIG_PLATFORM_CHART_VERSION} \\
    --namespace rig-system \\
    --create-namespace \\
    --set postgres.enabled=true`}</code></pre>
4. Bootstrap your first user and project by running:
  ```bash
  kubectl exec -it -n rig-system deploy/rig-platform -- rig-admin init
    ```

:::info Note
As part of the quick installation, a small PostgresSQL instance is installed in your
cluster, for the Platform to use. This is *not* recommended for production environments.
:::

## Extended installation guides

For real-world scenarios, we recommend using the extended installation guides, available here:

- [Rig Operator Setup guide](/operator-manual/setup-guide/operator)
- [Rig Platform Setup guide](/operator-manual/setup-guide/platform)


## Configuration

The Rig Operator and Platform both have a `values.yaml` file which specify how
to configure their respective Helm charts. The `values` files and their
defaults can be found here

- [Operator values](https://github.com/rigdev/rig/blob/main/deploy/charts/rig-operator/values.yaml)
- [Platform values](https://github.com/rigdev/rig/blob/main/deploy/charts/rig-platform/values.yaml)

To overwrite a default value when deploying, use `--set FIELD=VALUE` flags when
running `helm`.
